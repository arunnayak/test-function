name: Deploy test function

on:
  # run workflow   
  workflow_dispatch:

env:
  DAY_OF_WEEK: Monday

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@master
      - name: Install npm packages
        run: | 
          cd functions
          npm ci
      - name: auth
        uses: google-github-actions/auth@v0
        with:
          credentials_json: "ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAiZ3JvY2Vycy00YzkwMyIsCiAgInByaXZhdGVfa2V5X2lkIjogIjA2NzRhMzRlODE4YmU1NTg4NjRiMTg2YWI0ZjI3ZDc3YjdmODBiY2MiLAogICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS1cbk1JSUV2QUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktZd2dnU2lBZ0VBQW9JQkFRQ3RYR0xSTytaWXRCR1dcblYyejl6MjVyelQ3VVpxU2J5OWpGQkhGaVpocGdqZGJTbTg3V0RLZE5GaktsYzkrU2llcGE3Y2E0MUpETitVemFcbi9jeS96MkRyWFAyeGFFNGZxc1lSQWs2ck5QVUswTzJMT0FYWHFhbFZLcEpiazUvTTR3S2F6OXh0ZDZ4VHdzR0pcbktrakFnU2hXK3d4Zzg0MXlaLzFnVVI2Z3liWTJONjVKZ2k2ZW5qbEU5aStoOHVxbm1aNTZFYVd6bXFEZEJ3YTZcbitBUGdpSHRyWXpJZHp3WDNodGFZbkR6NGttWHdYVnJQS3pQeHVWOUt2am8rS1lUQVMrUUoreTdXMlRScE82S0Ncbjk1UHJZVG10ZlhWRTduNElsMTNSQldlaTYvWGs0REpueDRJam9DaTZxWUMwc1JxUkFvS1BRMmhOdjlUZmxIc2pcbks2ZFFqMGY5QWdNQkFBRUNnZ0VBS0Q5TmxjUHhTMkNxd0p1VmF5dHdPRWpUTUY2UUVyZDFvTy9TSHdVVFZKMDVcblpYWFV4QzcxM0ZpdDgybCtXemYzbDVxaVN5RFdhV3RhWTNFT3l1MHJWQmtuc0x0RmYrYVd5elljNjNTRSt6amNcbkhUa3BhaE15ZzlvNVZsZGtmeDJvNmlZZHg3QkQ2c0pKU2ozdDIvdGdVU2xCaTNTZnZ4TFRhVHdMLzBvMUtrcktcbm8xbjNLYitqT2ZXL0gyRGFZYzBROFE2SVFNOGE3MXM0NDR3WGlFT3Z3NjVzOUdPWUd2VmZpekNoVUs5SitIeEVcbjlWQ0dPQ3VxNEY1NjF6YW9oQnRObTJqMEE1RjVrdHpoM2VtS2lDamJtd1JXQVpDOUVwRTFaYjZBbk51alZHVkJcbnRwVFF0L2pSRm5ROGNzWlJQeE1ZRHE2cGxRRndmVnh4Z1lOdGdiSXVRUUtCZ1FEcWdXbTZjejBNZTV2SDZqNlNcbmtzUGhBV3NBRjJJekNSdnBFMFlOVG52UXJUNGVDbVlEdEpsNElPcWxyNXhGdm04VzlOa3N4b3QwbUlvNmozM2tcbmJJU3hONHZ5cEhsNVVuWkZVRUxsNTJLS3JrcTZNTTJLY01UWlBFVlZoc0FnekdaSDJMSmNvTmNkZENoN3dyNnBcblBxZFRETW8zUDRETXpvVFpNdVFtYmovcFVRS0JnUUM5UUR4OFFDRDRJU1lwRzVrT29JZU9iTlRjZ1pBVHpibFhcbmhaY1hiTG9SOGJZNHFGY2RjVEIxN2YycTJRY3RBTWVHZU5OS0VtNVM4a0IyZ2xmNWRMVnJOWWI4VVlKOWF2VkZcblUzM252N29za1ZRaEJxZmhua2RTTk5BZHc1ajU3UkxLZWJTUUo0eG5hRVJ1clNiSlZFMWVuL1RXZVFVK2tWdE1cbmtSVHMrQTNJN1FLQmdIeDR5SWZnMXd5ako2TExZUDhueTdUSXJlVFVoSmtXUXF4S1FLcWJkL2pobTlFU0wrZlRcbm1vbzYzcEduVHNsdU5VVDRIYlk0aEprVXhub2k0KzIwOUJHa3JESFV2MjE0S2JMTTBWVjZwY0Y2bGN1U1QrY2xcbnlEYU9XVGIyV1ZDUGJkTEE0SnR0L0FCMFFYQy9nN2dOdTM3SGtTWVdIT1dZME1jQXpqemYxQ2loQW9HQWVleWVcbml6WU5oNDVqdFd3d1NYb21teDJHYmFHVEh3OFU3MHdEc1hXODByNjB0UC9QVUFxU1BBZmR1Mm9pODExakxrRTlcbmJxVTlLbmNrRExXZzAvZmF3WDAwdis0TGNaMnM4c0w5aEliQy9OK01JZExWNmNjOUQ3c3lzVnBJZmd1OFpYSFBcbllHZjZUc3lmK2VYWDdURkF2MHV5UTFLb2pFeTlVekROR0hZZSsya0NnWUIzbkFDRVpjOWpmVjgyRHdLWGhvU2Fcbjl0SngwVWxlQUtIemUxenc2eWZCNmd3OE9wUDZZZ245VThCdlp6bDRFU3dZSUFWWFR2T0swRWdtYXRaRVFiQ0JcbnNmeGJzZE5Rd29RT0p3bkRLTGFsa0xucWhxdTZmUlBRTklXTmpldmtiUlBwdDJBYmgwOVIxdUlmeUhYYnFuMWVcbmc5Q3loU3FxRHlEdDNxS3RLdnNBTnc9PVxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwKICAiY2xpZW50X2VtYWlsIjogImdyb2NlcnMtNGM5MDNAYXBwc3BvdC5nc2VydmljZWFjY291bnQuY29tIiwKICAiY2xpZW50X2lkIjogIjExMzcwNDQxMDY5OTM1NzgzMzM4MCIsCiAgImF1dGhfdXJpIjogImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi9hdXRoIiwKICAidG9rZW5fdXJpIjogImh0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Rva2VuIiwKICAiYXV0aF9wcm92aWRlcl94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92MS9jZXJ0cyIsCiAgImNsaWVudF94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3JvYm90L3YxL21ldGFkYXRhL3g1MDkvZ3JvY2Vycy00YzkwMyU0MGFwcHNwb3QuZ3NlcnZpY2VhY2NvdW50LmNvbSIKfQo="
      - name: Deploy to Firebase
        id: deploy-function
        uses: google-github-actions/deploy-cloud-functions@v0
        with:
          name: helloWorld
          runtime: nodejs16
        env:
          FIREBASE_TOKEN: "1//0g2eerzI4IFMqCgYIARAAGBASNwF-L9IrrSui-UCkwvdPb5bsvyfzs0eVUij4bsI40BJaeY2Xl2rj8sL0WcpqdYeNbQg8OB8RlUg"